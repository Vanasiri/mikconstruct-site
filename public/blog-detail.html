<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <title>BLOG | MIK CONSTRUCT</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/blog.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="/img/logo_icon.jpg" />
</head>

<body>
    <header class="hero-header">
        <div class="container flex between center">
            <a href="/" class="logo"><img src="/img/logo.png" alt="MIK-Con Logo" /></a>
            <button class="hamburger" id="hamburger-btn">☰</button>
            <nav class="main-nav" id="main-nav">
                <ul class="flex menu-list">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/projects.html">PROJECT</a></li>
                    <li><a href="/blog.html">BLOG</a></li>
                    <li><a href="/services.html">SERVICE</a></li>
                    <li><a href="/about.html">ABOUT</a></li>
                    <li><a href="/contact.html">CONTACT</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="blog-detail-container blog-full">
        <main class="blog-main" id="content">
            <!-- เนื้อหาโหลดจาก API -->
        </main>
    </div>

    <footer class="site-footer">
        <div class="container center">
            © 2025 MIK CONSTRUCT Co., Ltd.
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        fetch(`/api/blogs/${id}`)
            .then(res => res.json())
            .then(post => {
                let imagesHtml = "";
                if (post.images && post.images.length) {
                    imagesHtml = `
            <div class="swiper blog-swiper">
              <div class="swiper-wrapper">
                ${post.images.map(img => `
                  <div class="swiper-slide">
                    <img src="${img.image_path}" alt="${post.title}">
                  </div>
                `).join("")}
              </div>
              <div class="swiper-pagination"></div>
            </div>
          `;
                }

                document.getElementById("content").innerHTML = `
          ${imagesHtml}
          <h1>${post.title}</h1>
          <p>${post.content}</p>
          <a href="/blog.html" class="btn-read">← ย้อนกลับ</a>
        `;

                if (post.images && post.images.length) {
                    new Swiper(".blog-swiper", {
                        loop: true,
                        pagination: { el: ".swiper-pagination" },
                    });
                }
            })
            .catch(err => console.error("Error:", err));

        const hamburgerBtn = document.getElementById("hamburger-btn");
        const nav = document.getElementById("main-nav");
        hamburgerBtn.addEventListener("click", () => nav.classList.toggle("open"));
        document.querySelectorAll(".main-nav a").forEach(link => {
            link.addEventListener("click", () => nav.classList.remove("open"));
        });
    </script>
</body>

</html>